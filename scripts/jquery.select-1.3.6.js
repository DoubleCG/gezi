!function(d){d.fn.extend({sSelect:function(){return this.each(function(e,t){var o=(this.name||this.id)+"__jQSelect"+e||"__jQSelect"+e;if("none"!=t.style.display&&d(this).parents()[0].id.indexOf("__jQSelect")<0){var n=this.tabIndex||0;d(this).before("<div class='dropdown' id="+o+" tabIndex="+n+"></div>").prependTo(d("#"+o));var s=d(this).css("z-index"),i=d("#"+o+" option").index(d("#"+o+" option:selected")[0]);d("#"+o).append('<div class="dropselectbox"><h4></h4><ul></ul></div>'),d("#"+o+" h4").empty().append(d("#"+o+" option:selected").text());var l=d("#"+o+" select").width();d.browser.safari&&(l+=15),d("#"+o+" h4").css({width:l});var r,c=l+parseInt(d("#"+o+" h4").css("padding-left"))+parseInt(d("#"+o+" h4").css("padding-right"));d("#"+o+" ul").css({width:"150px",right:"0px"}),d("#"+o+" select").hide(),d("#"+o+" div").hover(function(){d("#"+o+" h4").addClass("over")},function(){d("#"+o+" h4").removeClass("over")}),d("#"+o+" ul").bind("mouseover",function(e){clearTimeout(r)});var a=function(){d("#"+o+" h4").addClass("current"),d("#"+o+" ul").show();var t=d("#"+o).css("z-index");(d.browser.msie||d.browser.opera)&&d(".dropdown").css({position:"relative","z-index":"0"}),d("#"+o).css({position:"relative","z-index":"999"}),d.fn.setSelectValue(o),i=d("#"+o+" li").index(d(".selectedli")[0]);var e=d(window).scrollTop()+document.documentElement.clientHeight-d("#"+o).offset().top,n=d("#"+o+" ul").outerHeight(!0),s=d("#"+o).offset().top-d(window).scrollTop()-n;e<n&&0<s?d("#"+o+" ul").css({top:-n}):d("#"+o+" ul").css({top:d("#"+o+" h4").outerHeight(!0)}),d(window).scroll(function(){(e=d(window).scrollTop()+document.documentElement.clientHeight-d("#"+o).offset().top)<n?d("#"+o+" ul").css({top:-n}):d("#"+o+" ul").css({top:d("#"+o+" h4").outerHeight(!0)})}),d("#"+o+" li").click(function(e){i=d("#"+o+" li").index(this),d.fn.keyDown(o,i),d("#"+o+" h4").empty().append(d("#"+o+" option:selected").text()),d.fn.clearSelectMenu(o,t),e.stopPropagation(),e.cancelbubble=!0}).hover(function(){d("#"+o+" li").removeClass("over"),d(this).addClass("over").addClass("selectedli"),i=d("#"+o+" li").index(this)},function(){d(this).removeClass("over")})};d("#"+o).bind("focus",function(){d("#"+o+" h4").addClass("over")}).bind("click",function(e){if("block"==d("#"+o+" ul").css("display"))return d.fn.clearSelectMenu(o,s),!1;a(),e.stopPropagation()}).bind("mouseover",function(e){if("block"==d("#"+o+" ul").css("display"))return!1;a(),e.stopPropagation()}).bind("mouseout",function(e){if("block"==d("#"+o+" ul").css("display"))return r=setTimeout(function(){d.fn.clearSelectMenu(o,s)},500),!1;e.stopPropagation()}).bind("mousewheel",function(e,t){e.preventDefault();var n={$obj:d("#"+o+" li.over"),$slength:d("#"+o+" option").length,mup:function(){this.$obj.removeClass("over"),0==i?i=0:i--,d.fn.keyDown(o,i)},mdown:function(){this.$obj.removeClass("over"),i==this.$slength-1?i=this.$slength-1:i++,d.fn.keyDown(o,i)}};0<t?n.mup():n.mdown()}).bind("dblclick",function(){return d.fn.clearSelectMenu(o,s),!1}).bind("keydown",function(e){d(this).bind("keydown",function(e){if(40==e.keyCode||38==e.keyCode||35==e.keyCode||36==e.keyCode)return!1});var t=d("#"+o+" li.over"),n=d("#"+o+" option").length;switch(e.keyCode){case 9:return!0;case 13:case 27:d.fn.clearSelectMenu(o,s);break;case 33:t.removeClass("over"),i=0,d.fn.keyDown(o,i);break;case 34:case 35:t.removeClass("over"),i=n-1,d.fn.keyDown(o,i);break;case 36:t.removeClass("over"),i=0,d.fn.keyDown(o,i);break;case 38:e.preventDefault(),t.removeClass("over"),0==i?i=0:i--,d.fn.keyDown(o,i);break;case 40:e.preventDefault(),t.removeClass("over"),i==n-1?i=n-1:i++,d.fn.keyDown(o,i);break;default:e.preventDefault()}}).bind("blur",function(){return d.fn.clearSelectMenu(o,s),!1}).bind("selectstart",function(){return!1})}else if(0<d(this).parents()[0].id.indexOf("__jQSelect")){o=d(this).parents()[0].id,d.fn.setSelectValue(o);l=d("#"+o+" select").width();d.browser.safari&&(l+=15),d("#"+o+" h4").css({width:l});c=l+parseInt(d("#"+o+" h4").css("padding-left"))+parseInt(d("#"+o+" h4").css("padding-right"));d("#"+o+" ul").css({width:c+"px"}),"none"!=this.style.display&&d(this).hide()}})},clearSelectMenu:function(e,t){null!=e&&(t=t||"auto",d("#"+e+" ul").empty().hide(),d("#"+e+" h4").removeClass("over").removeClass("current"),d("#"+e).css({"z-index":t}))},setSelectValue:function(e){var t=[];d.each(d("#"+e+" option"),function(e){t.push("<li class='FixSelectBrowser'>"+d(this).text()+"</li>")}),t=t.join(""),d("#"+e+" ul").html(t),d("#"+e+" h4").html(d("#"+e+" option:selected").text()),d("#"+e+" li").eq(d("#"+e+" select")[0].selectedIndex).addClass("over").addClass("selectedli")},keyDown:function(e,t){var n=d("#"+e+" select");n[0].selectedIndex=t,n.change(),d("#"+e+" li:eq("+t+")").toggleClass("over"),d("#"+e+" h4").html(d("#"+e+" option:selected").text())}});var t=["DOMMouseScroll","mousewheel"];function n(e){var t=[].slice.call(arguments,1),n=0;return(e=d.event.fix(e||window.event)).type="mousewheel",e.wheelDelta&&(n=e.wheelDelta/120),e.detail&&(n=-e.detail/3),t.unshift(e,n),d.event.handle.apply(this,t)}d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);